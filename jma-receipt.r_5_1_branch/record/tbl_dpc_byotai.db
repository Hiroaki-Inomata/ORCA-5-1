tbl_dpc_byotai {
	YUKOSTYMD			char(8);
	YUKOEDYMD			char(8);
	MDC_CD				char(2);
	BUNRUI_CD			char(4);
	BYOTAI_CD			char(1);
	BYOTAI_FLG			number(1,0);
	AGE_MIN				number(3,0);
	AGE_MAX				number(3,0);
	HAIEN_KBN 			varchar(1);
	HAIEN_NAME 			varchar(20);
};

primary	{
	MDC_CD,BUNRUI_CD,BYOTAI_CD,HAIEN_KBN,YUKOSTYMD,YUKOEDYMD;
};

path	key		{ 	
	DBSELECT	{
		DECLARE tbl_dpc_byotai_key_csr CURSOR FOR
		SELECT *
		FROM tbl_dpc_byotai
		WHERE	MDC_CD      = :MDC_CD
		AND     BUNRUI_CD   = :BUNRUI_CD
		AND     BYOTAI_CD   = :BYOTAI_CD
		AND     HAIEN_KBN   = :HAIEN_KBN
		AND     YUKOSTYMD  <= :YUKOSTYMD
		AND     YUKOEDYMD  >= :YUKOEDYMD
		;
	};
};

path	key2	{ 	
	DBSELECT	{
		DECLARE tbl_dpc_byotai_key2_csr CURSOR FOR
		SELECT  a.*
		FROM tbl_dpc_byotai a,
          ( SELECT BYOTAI_CD FROM tbl_dpc_tensu
              WHERE MDC_CD     = :MDC_CD
               AND  BUNRUI_CD  = :BUNRUI_CD
               AND  YUKOSTYMD     <=  :YUKOSTYMD
               AND  YUKOEDYMD     >=  :YUKOEDYMD
            GROUP   BY BYOTAI_CD
          ) b
		WHERE	MDC_CD      = :MDC_CD
		AND     BUNRUI_CD   = :BUNRUI_CD
		AND     A.BYOTAI_CD =  B.BYOTAI_CD 
		AND     YUKOSTYMD  <= :YUKOSTYMD
		AND     YUKOEDYMD  >= :YUKOEDYMD
		ORDER   BY  BYOTAI_CD,HAIEN_KBN;
	};
};


