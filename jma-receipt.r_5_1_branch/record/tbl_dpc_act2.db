tbl_dpc_act2 {
	YUKOSTYMD			char(8);
	YUKOEDYMD			char(8);
	MDC_CD				char(2);
	BUNRUI_CD			char(4);
	ACT2_CD				char(1);
	ACT2_FLG			number(2,0);
	J_NAME1				char(200);
	J_CD1				char(20);
	J_NAME2				char(200);
	J_CD2				char(20);
	SEL_DPC_CD			varchar(14),virtual;
};

primary	{
	MDC_CD,BUNRUI_CD,ACT2_CD,ACT2_FLG,J_CD1,J_CD2,YUKOSTYMD,YUKOEDYMD;
};

path	key		{ 	
	DBSELECT	{
		DECLARE tbl_dpc_act2_key_csr CURSOR FOR
		SELECT *
		FROM tbl_dpc_act2
		WHERE MDC_CD        =   :MDC_CD
		 AND  BUNRUI_CD     =   :BUNRUI_CD
	     AND  ACT2_CD       =   :ACT2_CD
	     AND  ACT2_FLG      =   :ACT2_FLG
	     AND  J_CD1         =   :J_CD1
	     AND  J_CD2         =   :J_CD2
	   	 AND  YUKOSTYMD     <=  :YUKOSTYMD
	   	 AND  YUKOEDYMD     >=  :YUKOEDYMD
		;
	};
};

path	key2		{ 	
	DBSELECT	{
		DECLARE tbl_dpc_act2_key2_csr CURSOR FOR
		SELECT  a.*
		FROM tbl_dpc_act2 a,
          ( SELECT ACT2_CD FROM tbl_dpc_tensu
              WHERE DPC_CD     LIKE   :SEL_DPC_CD
               AND  YUKOSTYMD     <=  :YUKOSTYMD
               AND  YUKOEDYMD     >=  :YUKOEDYMD
            GROUP   BY ACT2_CD
          ) b
		WHERE
		     A.MDC_CD     = :MDC_CD
		 AND A.BUNRUI_CD  = :BUNRUI_CD
		 AND A.ACT2_CD    =  B.ACT2_CD
	   	 AND A.YUKOSTYMD     <=  :YUKOSTYMD
	   	 AND A.YUKOEDYMD     >=  :YUKOEDYMD
	    ORDER BY A.ACT2_CD DESC,A.ACT2_FLG DESC,
                 TRANSLATE(A.J_CD1,'-','~'),
                 TRANSLATE(A.J_CD2,'-','~')
		;
	};
};

