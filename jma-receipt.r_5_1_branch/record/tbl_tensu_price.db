tbl_tensu_price {
	HOSPNUM				number(2,0);
	SRYCD				char(9);
	YUKOSTYMD			char(8);
	YUKOEDYMD			char(8);
	PRICE				number(11,2);
	TERMID   			varchar(16);
	OPID     			varchar(16);
	CREYMD   			varchar(8);
	UPYMD    			varchar(8);
	UPHMS				varchar(6);
#-----> 主キー更新用項目
	UPHOSPNUM			number(2,0),virtual;
	UPSRYCD				char(9),virtual;
	UPYUKOSTYMD			char(8),virtual;
	UPYUKOEDYMD			char(8),virtual;
};
primary	{
	HOSPNUM,SRYCD,YUKOSTYMD,YUKOEDYMD;
};

path	key 	{
	DBSELECT	{
		DECLARE tbl_tensu_price_key_csr CURSOR FOR
		SELECT *
		FROM tbl_tensu_price
		WHERE 	HOSPNUM	= :HOSPNUM
			AND   SRYCD    =   :SRYCD
 			AND   YUKOSTYMD  <=  :YUKOSTYMD
			AND   YUKOEDYMD  >=  :YUKOEDYMD
		;
	};
};

path	upd1	{ 	
	DBUPDATE	{
		UPDATE	tbl_tensu_price 
				SET	
	HOSPNUM	=	:HOSPNUM,
	SRYCD	=	:SRYCD,
	YUKOSTYMD	=	:YUKOSTYMD,
	YUKOEDYMD	=	:YUKOEDYMD,
	PRICE    	=	:PRICE,
	TERMID 			=	:TERMID,
	OPID 			=	:OPID,
	CREYMD 			=	:CREYMD,
	UPYMD 			=	:UPYMD,
	UPHMS			=	:UPHMS
		WHERE 	HOSPNUM	= :UPHOSPNUM
			AND   SRYCD      =   :UPSRYCD
			AND	YUKOSTYMD     =  :UPYUKOSTYMD
			AND	YUKOEDYMD     =  :UPYUKOEDYMD
		;
	};
};

path	all	{
	DBSELECT	{
		DECLARE tbl_tensu_price_all_csr CURSOR FOR
		SELECT *
		FROM tbl_tensu_price
		WHERE 	HOSPNUM	= :HOSPNUM
 		;
	};
};

path	key2 	{
	DBSELECT	{
		DECLARE tbl_tensu_price_key2_csr CURSOR FOR
		SELECT *
		FROM tbl_tensu_price
		WHERE 	HOSPNUM	= :HOSPNUM
			AND   SRYCD    =   :SRYCD
			ORDER   BY  YUKOSTYMD
		;
	};
};

path	key3 	{
	DBSELECT	{
		DECLARE tbl_tensu_price_key3_csr CURSOR FOR
		SELECT *
		FROM tbl_tensu_price
		WHERE 	HOSPNUM	= :HOSPNUM
			AND   SRYCD    =   :SRYCD
			ORDER   BY  YUKOSTYMD DESC
		;
	};
};
path    del1    {
        DBDELETE        {
                DELETE
                FROM tbl_tensu_price
                        WHERE   HOSPNUM    =   :HOSPNUM
			AND   SRYCD    =   :SRYCD
                ;
        };
};
