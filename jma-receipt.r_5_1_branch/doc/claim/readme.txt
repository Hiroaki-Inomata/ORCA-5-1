This Text Character is EUC-JP Code.

CLAIM通信スクリプト version2.0 ドキュメント
                                             日医標準レセプトソフト開発チーム



-----------------------------------------------------------------------------
概要

CLAIM通信スクリプトは、MML(MedicalMarkupLanguage)/CLAIM(CLinicalAccountingInforMation)規約に基づいたXMLファイルを使い、日医標準レセプトソフトと、電子カルテのやりとりを仲介する処理である。

当初(version1)のCLAIM通信には、以下のような不満点があった。
  ・実行速度が遅い
  ・設定ファイルの可読性が悪い
この２点をversion2.0で解決する。


※現在、version2.0の実行系は受信処理のみである。



-----------------------------------------------------------------------------
詳細


CLAIM通信スクリプトは、大まかに以下のような処理で分けられる。
  ・XMLファイル生成処理
  ・XMLファイル解読処理
  ・XMLファイル送信処理
  ・XMLファイル受信処理

XMLファイル生成処理は、COBOLプログラムが生成したシーケンシャルファイルを元に、電子カルテに送信するXMLファイルを生成する処理である。
XMLファイル解読処理は、電子カルテより受信したXMLファイルを解読し、COBOLプログラムが扱いやすいシーケンシャルファイルに変換する処理である。
XMLファイル送信処理は、XMLファイル生成処理で作成されたファイルを、電子カルテに送信する処理である。
XMLファイル受信処理は、TCPサーバとして起動し、電子カルテからXMLファイルを受信し、XMLファイル解読処理へファイルを渡す処理である。



-----------------------------------------------------------------------------
受信サーバの起動方法


受信サーバを起動するには、以下のファイルを起動する。
--------------------
  scripts/claim/ORC_CLAIM_SERVER.sh
--------------------
引数には、「ポート番号」と「ログ出力場所」を指定する。


woodyでの例として、以下のように指定することで起動できる。
--------------------
$ /usr/lib/jma-receipt/scripts/claim/ORC_CLAIM_SERVER.sh 9000 /var/tmp
--------------------
実行時のユーザは「orca」ユーザ、ポート番号は「9000」、ログ出力場所は「/var/tmp」



-----------------------------------------------------------------------------
TCP接続ポートについて

XMLファイルの送受信は、TCP接続によるソケット通信で行われる。
やりとりを行うポートについては、送信処理については、日医標準レセプトソフトのシステム管理マスタの設定によって決定される。(CLAIM通信スクリプトは、MONTSUQI配下のアプリケーションから渡された引数を元にやりとりを行う)
受信時のポートは、上記「受信サーバの起動方法」を参照すること。



-----------------------------------------------------------------------------
2004年1月 日医標準レセプトソフト開発チーム制作
